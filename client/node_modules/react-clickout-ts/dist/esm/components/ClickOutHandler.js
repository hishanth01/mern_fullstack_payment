import { Children, cloneElement, useCallback, useEffect, useRef } from 'react';
const ClickOutHandler = ({ children, enabled = true, events = ['mousedown', 'touchstart'], ignoredElements = [], onClickOut, }) => {
    const wrapperRef = useRef(null);
    const shouldFire = useCallback((ev) => {
        return (enabled &&
            wrapperRef.current &&
            !wrapperRef.current.contains(ev.target) &&
            !ignoredElements.some((element) => element && element.contains(ev.target)));
    }, [enabled, ignoredElements]);
    useEffect(() => {
        const handleClickOut = (ev) => {
            if (shouldFire(ev)) {
                onClickOut(ev);
            }
        };
        events.forEach((event) => {
            document.addEventListener(event, handleClickOut);
        });
        return () => {
            events.forEach((event) => {
                document.removeEventListener(event, handleClickOut);
            });
        };
    }, [events, onClickOut, shouldFire]);
    if (typeof children === 'function') {
        return children({ ref: wrapperRef });
    }
    return cloneElement(Children.only(children), {
        ref: wrapperRef,
    });
};
export default ClickOutHandler;
//# sourceMappingURL=ClickOutHandler.js.map