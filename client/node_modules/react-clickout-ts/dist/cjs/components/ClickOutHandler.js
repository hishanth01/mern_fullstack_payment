"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const react_1 = require("react");
const ClickOutHandler = ({ children, enabled = true, events = ['mousedown', 'touchstart'], ignoredElements = [], onClickOut, }) => {
    const wrapperRef = (0, react_1.useRef)(null);
    const shouldFire = (0, react_1.useCallback)((ev) => {
        return (enabled &&
            wrapperRef.current &&
            !wrapperRef.current.contains(ev.target) &&
            !ignoredElements.some((element) => element && element.contains(ev.target)));
    }, [enabled, ignoredElements]);
    (0, react_1.useEffect)(() => {
        const handleClickOut = (ev) => {
            if (shouldFire(ev)) {
                onClickOut(ev);
            }
        };
        events.forEach((event) => {
            document.addEventListener(event, handleClickOut);
        });
        return () => {
            events.forEach((event) => {
                document.removeEventListener(event, handleClickOut);
            });
        };
    }, [events, onClickOut, shouldFire]);
    if (typeof children === 'function') {
        return children({ ref: wrapperRef });
    }
    return (0, react_1.cloneElement)(react_1.Children.only(children), {
        ref: wrapperRef,
    });
};
exports.default = ClickOutHandler;
//# sourceMappingURL=ClickOutHandler.js.map